
<body>
    <div id="header">
        <button id = "home_button">Home</button>
        <button id = "messages">Messages</button>
        <button id = "profile">Profile</button>
    </div>

    <div>{{message}}</div><br>

    <img id='profilePicture' src="{{{profile_picture_url}}}" alt="No Profile Picture" width = "100" height="100">

    <div id="profileInfo">
        <p>{{user.fname}} {{user.lname}}</p>
        <p>{{user.year}}</p>
        <p>{{user.major}}</p>
    </div>

    <div id="currentCourses">
      <h3>Current Courses</h3>
      {{#each courses}}
        <div class="course">
          <p>{{course_title}}</p>
        </div>
      {{/each}}
    </div>

    <div id="biography">

        <h3 id="bio_header"> Biography
            <span class="btn-group">
                <button class="btn btn-mini" id = "bio_edit" onclick="saveBioInfo(this)" value = 'Edit'>Edit</button>
            </span>
        </h3>
    <form method="post" action="/save/bio">
            <textarea cols="50" id = "bio_text" disabled = disabled>{{user.biography}}</textarea>
    </form>
    </div>

    <div id="activities">
        <h3>Activities/Clubs</h3>
        <p>{{user.activities}}</p>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</body>

<script>
    var home_button = document.getElementById("home_button");
    home_button.onclick = function () {
        window.location.href = "/";
    };

    var messages_button = document.getElementById("messages");
    messages_button.onclick = function () {
        window.location.href = "/messages";
    };

    var profile_button = document.getElementById("profile");
    profile_button.onclick = function () {
        window.location.href = "/profile";
    };

    function saveBioInfo(button){
        console.log(button.innerText);
        var textarea = document.getElementById('bio_text');

        if(button.innerText === "Edit"){
            textarea.disabled = false;
            button.innerText = "Save";
        }else{
            textarea.disabled = true;
            $.ajax({
                type: "POST",
                url: '/save',
                data: $('textarea#bio_text').val(),
                success: function(){
                    alert('Successful');
                }
            });
            button.innerText = 'Edit';
        }
    }

</script>

<style type="text/css">
    #bio_header .btn-group { display: inline-block; }

    #bio_text {
        resize: none;
        height: 200px;
    }

    body {padding-left: 10px}
</style>